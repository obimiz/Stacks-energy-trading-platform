# Energy Trading Platform Smart Contracts

## Overview

This repository contains smart contracts for a decentralized Energy Trading Platform built on the Stacks blockchain. The platform enables users to register energy assets, list them for sale, and facilitate peer-to-peer energy trading using a fungible token called energy-credit.

## Features

### Utility Token
- A fungible token `energy-credit` is used for transactions between buyers and sellers.

### Energy Asset Management
- Users can register renewable energy assets like solar panels and wind turbines.

### Energy Trading
- Sellers can list energy for sale, specifying price per kWh and available energy.
- Buyers can purchase energy directly from sellers, with automated balance transfers.

## Contracts Overview

### 1. Utility Token Contract
The `energy-credit` token facilitates all monetary transactions on the platform. Buyers purchase energy using these tokens, and sellers receive payments in the same.

### 2. Energy Asset Registration Contract
Manages the registration of energy-producing assets.

#### Data Variables:
- `next-asset-id`: Tracks the next unique ID for new assets.
- Data Map: `energy-assets`: Stores details about registered energy assets, including:
	- Asset ID
	- Owner
	- Generation capacity
	- Energy type (e.g., solar, wind)
	- Location
	- Certification date

#### Functionality:
- Register energy-producing assets with metadata like capacity, type, and location.

### 3. Energy Trading Contract
Facilitates energy listings and transactions.

#### Data Variables:
- `next-listing-id`: Tracks the next unique ID for new listings.
- Data Map: `energy-listings`: Stores active energy listings, including:
	- Listing ID
	- Seller
	- Asset ID
	- Price per kWh
	- Available energy
	- Listing status

#### Key Features:
- Sellers can create listings for energy generated by their registered assets.
- Buyers can purchase energy directly from the listings.

## Functions

### Utility Token Functions

#### Mint Energy Credits
```clarity
(define-public (mint-energy-credits (amount uint)))
```
Mints `energy-credit` tokens for the caller.

**Parameters:**
- `amount`: The number of tokens to mint.

**Usage:** Typically used for initialization or rewarding users.

### Energy Asset Registration Functions

#### Register Energy Asset
```clarity
(define-public (register-energy-asset 
	(generation-capacity uint) 
	(energy-type (string-ascii 20)) 
	(location (string-ascii 50))))
```
Registers a new energy-producing asset.

**Parameters:**
- `generation-capacity`: The maximum energy output of the asset.
- `energy-type`: Type of energy (e.g., solar, wind).
- `location`: Geographical location of the asset.

**Returns:** Unique `asset-id` for the registered asset.

### Energy Trading Functions

#### Create Energy Listing
```clarity
(define-public (create-energy-listing 
	(asset-id uint) 
	(price-per-kwh uint) 
	(available-energy uint)))
```
Creates a listing to sell energy from a registered asset.

**Parameters:**
- `asset-id`: ID of the energy asset.
- `price-per-kwh`: Price per kilowatt-hour in `energy-credit`.
- `available-energy`: Total energy available for sale.

**Returns:** Unique `listing-id` for the created listing.

#### Purchase Energy
```clarity
(define-public (purchase-energy 
	(listing-id uint) 
	(energy-amount uint)))
```
Facilitates the purchase of energy from a listing.

**Parameters:**
- `listing-id`: ID of the listing to purchase from.
- `energy-amount`: Amount of energy (in kWh) to buy.

**Key Operations:**
- Transfers `energy-credit` tokens from the buyer to the seller.
- Updates the listing's available energy.

**Returns:** `true` on successful purchase.

## Error Codes
- `ERR-NOT-OWNER (u1)`: Caller is not the owner of the specified asset.
- `ERR-LISTING-NOT-FOUND (u2)`: The specified listing does not exist.
- `ERR-INSUFFICIENT-ENERGY (u3)`: Requested energy exceeds the available amount.

## Usage

### Prerequisites
- **Stacks Blockchain Environment:** Set up the Stacks blockchain development environment.
- **Clarity Developer Tools:** Install Clarity tools to deploy and test smart contracts.

### Deployment
1. Deploy the `energy-credit` token contract to initialize the fungible token.
2. Deploy the Energy Asset Registration and Energy Trading contracts.
3. Use the provided functions to interact with the platform.

### Testing
Use Clarity REPL or integration tests to validate the functionality:
1. Mint energy credits for a test account.
2. Register an energy asset with its details.
3. Create an energy listing using the registered asset.
4. Purchase energy from the listing and verify updates to balances and listing status.

## Future Enhancements
- Integrate an energy audit system for verifying asset claims.
- Enable dynamic pricing based on market demand.
- Add reputation tracking for sellers and buyers.